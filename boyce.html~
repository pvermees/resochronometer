<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>In-situ U-Th-Sm-He calculator</title>
<script src="Resochronometer.js"></script>
<script src="jquery-1.11.1.js"></script>
<script src="jquery.handsontable.full.js"></script>
<script src="jquery-ui-1.11.0.js"></script>
<link rel="stylesheet" media="screen" href="jquery.handsontable.full.css">
<style>
body {text-align: center; vertical-align: middle;}
div {margin-left: auto; margin-right: auto;}
div.box {border:1px solid black; display:inline-block;}
</style>
</head>
<body>

<script>

var myK, mysK, mySMPs;

$( document ).ready(function() {

var SMPdata = [
["RB140-1",302,11,129,5,2.47,0.17,0.1186,0,1341.4,0,,],
["RB140-2",260,10,121,5,2.40,0.17,0.1094,0,1251.7,0,,],
["RB140-3",301,14,123,7,2.61,0.15,0.1198,0,1261.4,0,,],
["RB140-4",262,12,114,4,1.98,0.14,0.1195,0,1278.7,0,,],
["RB140-5",292,13,132,6,2.61,0.17,0.1252,0,1297.9,0,,],
["RB140-6",250,10,113,5,2.21,0.18,0.1180,0,1221.0,0,,],
["RB140-7",295,13,128,5,2.46,0.18,0.1180,0,1241.7,0,,],
["RB140-8",313,14,134,5,2.49,0.18,0.1095,0,1174.1,0,,],
["RB140-9",293,13,132,6,2.35,0.16,0.1085,0,1097.5,0,,],
["RB140-10",297,10,136,6,2.45,0.17,0.1112,0,1202.9,0,,],
["RB140-11",286,11,133,5,2.53,0.17,0.1262,0,1298.8,0,,],
["RB140-12",276,13,111,5,2.61,0.15,0.1259,0,1311.7,0,,],
["RB140-13",301,11,136,6,2.65,0.15,0.1138,0,1173.2,0,,]
];

$('#SMPs').handsontable({
  data: SMPdata,
  minRows: 50,
  minCols: 13,
  colWidths: [104,60,60,60,60,60,60,60,60,60,60,60,60],
  manualColumnResize: true,
  width: 850,
  height: 300,
  readOnly: false,
  colHeaders: ["name", "U", "&sigma;(U)", "Th", "&sigma;(Th)", "Sm", "&sigma;(Sm)",
               "He", "&sigma;(He)", "vol", "&sigma;(vol)", "age", "&sigma;(age)"],
  contextMenu: true
});

$('#HELIOTABLE').handsontable({
  minRows: 50,
  minCols: 8,
  colWidths: 103,
  manualColumnResize: true,
  width: 850,
  height: 300,
  colHeaders: ["U", "&sigma;(U)", "Th", "&sigma;(Th)", "Sm", "&sigma;(Sm)", "He", "&sigma;(He)"],
  contextMenu: true
});

$("#run")
 .button()
 .click(function( event ) {
   run();
});

$("#clear")
 .button()
 .click(function( event ) {
  $('#SMPs').handsontable('clear');
  $('#HELIOTABLE').handsontable('clear');
});

$("#tohelioplot")
 .button()
 .click(function( event ) {
  $('#HELIOPLOT').css('visibility','visible');
  toHelioplot($('#HELIOTABLE'),mySMPs,1,0);
});

$("#hide")
 .button()
 .click(function( event ) {
  $('#HELIOPLOT').css('visibility','hidden');
});

$("#help")
 .button()
  .click(function( event ) {
   window.location = "help.html";
});

function run(){
 ppm = $("input[name='ppmfmol']:checked").val() == "ppm";
 mySMPs = new SMPs(new Measurements($('#SMPs')));
 mySMPs.meas.load();
 setAges($('#SMPs'),mySMPs,1,0);
}

});
</script>

<form>
<div class="box" id="boycevermeesch">
&nbsp;  <input type="radio" name="boyce" value="boyce"> first principles
 <input type="radio" name="boyce" value="vermeesch"> pairwise &nbsp;
</div>
<div class="box" id="UThSm">
 &nbsp; U, Th, Sm in
 <input type="radio" name="ppmfmol" value="ppm" checked="true"> ppm
 <input type="radio" name="ppmfmol" value="fmol"> fmol/g &nbsp;
</div>
<div class="box" id="He">
 &nbsp; He in 
 <input type="radio" name="nccfmol" value="ncc" checked="true"> ncc
 <input type="radio" name="nccfmol" value="fmol"> fmol &nbsp;
</div>
<div class="box" id="voldens">
&nbsp; vol in &mu;m<sup>3</sup>, &rho; = <input type="text" name="rho" value="3.5" 
style="width:50px;"> g/cm<sup>3</sup> &nbsp;
</div>
</div>
</form>
<p></p>
Samples:
<p></p>
<div id="SMPs" style="overflow: auto"></div>
<p></p>
<button id="run"><b>RUN</b></button>
<button id="clear">CLEAR</button>
<button id="help">HELP</button>
<button id="tohelioplot">TO HELIOPLOT</button>
<div id="HELIOPLOT" style="overflow: auto; visibility: hidden;">
<p></p>
Input file for <a href="http://helioplot.london-geochron.com">HelioPlot</a>:
<p></p>
<div id="HELIOTABLE"></div>
<p></p>
<button id="hide">HIDE</button>
</div>
</body>
</html>
