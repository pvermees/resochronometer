<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>In-situ U-Th-Sm-He calculator</title>
<script src="Resochronometer.js"></script>
<script src="jquery-1.11.1.js"></script>
<script src="jquery.handsontable.full.js"></script>
<script src="jquery-ui-1.11.0.js"></script>
<link rel="stylesheet" media="screen" href="jquery.handsontable.full.css">
<style>
body {text-align: center; vertical-align: middle;}
div {margin-left: auto; margin-right: auto;}
div.box {border:1px solid black; display:inline-block;}
</style>
</head>
<body>

<script>

boyce = true;
var myK = 1, mysK = 0, mySMPs;

$( document ).ready(function() {

$("#boyce").prop("checked", boyce);

$("#ppm").prop("checked", ppm);

$("#ncc").prop("checked", ncc);

$("#rho").prop("value", rho);

var SMPdata = [
["RB140-1",284.5,2.75,129.7,1.5,2.2,0.165,0.133,0.00013,1634,33,,],
["RB140-2",273.4,2.8,126.3,1.25,2.39,0.145,0.137,0.00014,1660,33,,],
["RB140-3",265.5,2.85,122.9,1.5,2.18,0.155,0.122,0.00012,1498,30,,],
["RB140-4",262,3.1,121.2,1.3,2.14,0.185,0.125,0.00013,1434,29,,],
["RB140-5",275.6,3.4,128.3,1.75,2.4,0.175,0.122,0.00012,1502,30,,],
["RB140-6",270.8,2.65,125.2,1.2,2.18,0.205,0.133,0.00013,1602,32,,],
["RB140-7",278.1,2.95,128.8,1.45,2.47,0.19,0.122,0.00012,1466,29,,]
];

$('#SMPs').handsontable({
  data: SMPdata,
  minRows: 50,
  minCols: 13,
  colWidths: [104,60,60,60,60,60,60,60,60,60,60,60,60],
  manualColumnResize: true,
  width: 850,
  height: 300,
  readOnly: false,
  colHeaders: ["name", "U", "&sigma;(U)", "Th", "&sigma;(Th)", "Sm", "&sigma;(Sm)",
               "He", "&sigma;(He)", "vol", "&sigma;(vol)", "age", "&sigma;(age)"],
  contextMenu: true
});

$('#HELIOTABLE').handsontable({
  minRows: 50,
  minCols: 8,
  colWidths: 103,
  manualColumnResize: true,
  width: 850,
  height: 300,
  colHeaders: ["U", "&sigma;(U)", "Th", "&sigma;(Th)", "Sm", "&sigma;(Sm)", "He", "&sigma;(He)"],
  contextMenu: true
});

$("#run").button().click(function( event ) {
   run();
});

$("#clear").button().click(function( event ) {
  $('#SMPs').handsontable('clear');
  $('#HELIOTABLE').handsontable('clear');
});

$("#tohelioplot").button().click(function( event ) {
  $('#HELIOPLOT').css('visibility','visible');
  toHelioplot($('#HELIOTABLE'),mySMPs,myK,mysK);
});

$("#hide").button().click(function( event ) {
  $('#HELIOPLOT').css('visibility','hidden');
});

$("#help").button().click(function( event ) {
   window.location = "help.html";
});

function run(){
 ppm = $("#ppm").prop('checked');
 ncc = $("#ncc").prop('checked');
 rho = $("#rho").prop('value');
 mySMPs = new SMPs(new Measurements($('#SMPs')));
 mySMPs.meas.load();
 setAges($('#SMPs'),mySMPs,myK,mysK);
}

});
</script>

<form>
<div class="box" id="boycevermeesch">
&nbsp;  <input type="radio" name="boyce" id="boyce"> first principles
 <input type="radio" name="boyce" id="vermeesch"> pairwise &nbsp;
</div>
<div class="box" id="UThSm">
 &nbsp; U, Th, Sm in
 <input type="radio" name="ppmnmol" id="ppm"> ppm
 <input type="radio" name="ppmnmol" id="nmol"> nmol/mg &nbsp;
</div>
<div class="box" id="He">
 &nbsp; He in 
 <input type="radio" name="nccnmol" id="ncc"> ncc
 <input type="radio" name="nccnmol" id="nmol"> nmol &nbsp;
</div>
<div class="box" id="voldens">
&nbsp; vol in &mu;m<sup>3</sup>, &rho; = <input type="text" id="rho" 
style="width:50px;"> g/cm<sup>3</sup> &nbsp;
</div>
</div>
</form>
<p></p>
Samples:
<p></p>
<div id="SMPs" style="overflow: auto"></div>
<p></p>
<button id="run"><b>RUN</b></button>
<button id="clear">CLEAR</button>
<button id="help">HELP</button>
<button id="tohelioplot">TO HELIOPLOT</button>
<div id="HELIOPLOT" style="overflow: auto; visibility: hidden;">
<p></p>
Input file for <a href="http://helioplot.london-geochron.com">HelioPlot</a>:
<p></p>
<div id="HELIOTABLE"></div>
<p></p>
<button id="hide">HIDE</button>
</div>
</body>
</html>
